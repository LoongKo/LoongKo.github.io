---
title: 网站接入微信登陆
date: 2019-05-07 22:39:04
categories: 其他
tags: 微信登陆
---
本文并不是讲具体详细的步骤，因为官方文档都是写的很清楚。主要说一下[微信开放平台](https://open.weixin.qq.com/)和[微信公众平台](https://mp.weixin.qq.com/)的区别，我们接入微信登陆需要用哪个平台。因为网上说的对于新手来说不是很容易理解，我也是查询很多资料才明白。

场景一：pc端打开网站，需要用手机微信扫描二维码授权登陆，这种我们需要微信开放平台。
场景二：微信内置的浏览器打开网站（一般是适配手机端的网站网页），微信登陆直接显示授权页面，这种我们需要微信公众平台。
场景三：手机普通浏览器，即非微信内置的浏览器，点击微信登陆希望直接唤醒微信授权，这种情况据我所知目前好像官方给出的文档并没有提到，也没给出相应的api，所以这种情况暂时无法实现。

上面三个场景说的是根据我查询的资料所得，若是有错误欢迎指正，毕竟上面只是我自己查询资料总结的。

<!-- more -->

对于第一个场景我们需要在微信开放平台注册账号，然后根据官方文档认证身份之类的，账号弄好了就新建一个网站应用，根据官方文档来做就好。

对于只需要扫码登陆的只要微信开放平台注册账号根据文档来弄就行了，不需要在公众平台注册,也就是说不需要公众号。

对于场景二我们需要在微信公众平台注册公众号，注意是注册服务号，然后根据官方文档一步一步来。只要场景二的这样就可以，不需要在微信开放平台注册。

但是我们场景一和场景二都需要的时候呢？那就两个平台都注册，按照官方文档一步步来做，但是微信开放平台创建的网站应用和公众号接入的微信登陆返回的openid是不一样的，所以我们怎么判断登陆用户是同一个呢？解决办法便是使用unionid，在微信开放平台绑定你的公众号，这样的话微信开放平台和公众号两边的微信登陆都会返回相同的unionid，同一微信开放平台账号下的公众号和应用只有一个unionid，所以就可以用unionid判断是否同一个用户了。


以上便是我的经验，若有错误欢迎指正。