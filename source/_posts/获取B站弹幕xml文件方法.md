---
title: 获取B站弹幕xml文件方法
date: 2018-11-17 16:31:00
categories: 其他
tags: B站
---

# 第一步：找到视频对应的cid

打开视频的播放页面，鼠标右键打开查看页面源代码，通过搜索关键字cid找到视频对应的cid。比如下图的62298939就是该视频的cid。

{% asset_img 1.png %}

# 第二步：通过api获取xml文件

`https://comment.bilibili.com/{$cid}.xml`这是B站官方的弹幕api，把{$cid}改为对应视频的cid就是视频的弹幕xml文件地址了。
> (出处：爬虫如何抓取b站评论，弹幕等内容？ - Komoriii的回答 - 知乎
https://www.zhihu.com/question/56924570/answer/471366573)

# B站弹幕xml文件各个参数的意思
<!-- more -->

`<d p="0,1,25,16777215,1312863760,0,eff85771,42759017">前排占位置</d>`
这行内容的意义呢
先说内容“前排站位置”就不解释了
p这个字段里面的内容：
0,1,25,16777215,1312863760,0,eff85771,42759017
中几个逗号分割的数据
第一个参数是弹幕出现的时间 以秒数为单位。
第二个参数是弹幕的模式1..3 滚动弹幕 4底端弹幕 5顶端弹幕 6.逆向弹幕 7精准定位 8高级弹幕
第三个参数是字号， 12非常小,16特小,18小,25中,36大,45很大,64特别大
第四个参数是字体的颜色 以HTML颜色的十位数为准
第五个参数是Unix格式的时间戳。基准时间为 1970-1-1 08:00:00
第六个参数是弹幕池 0普通池 1字幕池 2特殊池 【目前特殊池为高级弹幕专用】
第七个参数是发送者的ID，用于“屏蔽此弹幕的发送者”功能
第八个参数是弹幕在弹幕数据库中rowID 用于“历史弹幕”功能。
> (出处：https://zhidao.baidu.com/question/1430448163912263499.html)
